"use strict";var m=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var $=(s,e)=>{for(var i in e)m(s,i,{get:e[i],enumerable:!0})},A=(s,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of h(e))!N.call(s,o)&&o!==i&&m(s,o,{get:()=>e[o],enumerable:!(r=T(e,o))||r.enumerable});return s};var b=s=>A(m({},"__esModule",{value:!0}),s);var E={};$(E,{default:()=>y});module.exports=b(E);var d=require("react"),t=require("@raycast/api");var p=require("child_process");var u=Object.assign({},process.env,{PATH:"/usr/local/bin:/usr/bin:/opt/homebrew/bin"});var S=require("@raycast/api");var v=require("@raycast/api");function f(s){return(0,p.exec)("tmux list-sessions | awk '{print $1}' | sed 's/://'",{env:u},s)}function x(s,e){return(0,p.exec)(`tmux new-session -d -s ${s}`,{env:u},e)}var a=require("react/jsx-runtime");function y(){let[s,e]=(0,d.useState)(!1),[i,r]=(0,d.useState)("");return(0,a.jsx)(t.Form,{isLoading:s,navigationTitle:"Create New Tmux Session",actions:(0,a.jsx)(t.ActionPanel,{children:(0,a.jsx)(t.Action.SubmitForm,{title:"Create New Session",onSubmit:async o=>{let l=o.newSessionName;e(!0);let n=await(0,t.showToast)({style:t.Toast.Style.Animated,title:""});x(l,(c,g,w)=>{if(c||w){console.error(`exec error: ${c}`),e(!1),n.style=t.Toast.Style.Failure,n.message="Failed to create new session";return}n.style=t.Toast.Style.Success,n.style=t.Toast.Style.Success,n.message=`New session ${l} is setup successfully`,e(!1),(0,t.popToRoot)()})}})}),children:(0,a.jsx)(t.Form.TextField,{title:"New Session Name",id:"newSessionName",error:i,onChange:o=>{!o||o.length===0||f((l,n,c)=>{(l||c)&&(console.error(`exec error: ${l}`),e(!1)),n.trim().split(`
`).includes(o)?r("Session name already exists"):r("")})}})})}
